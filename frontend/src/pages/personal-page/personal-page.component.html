<div class="topic-full-view-container">
    <app-header/>
    <header>
        <a routerLink="/topics">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5" stroke="#3C72FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M12 19L5 12L12 5" stroke="#3C72FF" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            <p>Профиль</p>
        </a>
    </header>
    <div class="user-info-header">
            <p>Вы зарегистрирвоанны как: <mark>{{user.username}}</mark>, email: <mark>{{user.email}}</mark>, user-id: <mark>{{user.id}}</mark></p>
    </div>

    <div class="info-container">
        <h2>{{this.partner.name}}</h2>
        <p>
            {{this.partner.description}}
        </p>
        <div class="buttons">
            <button class="ghost-button">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 15.75V14.25C12 13.4544 11.6839 12.6913 11.1213 12.1287C10.5587 11.5661 9.79565 11.25 9 11.25H4.5C3.70435 11.25 2.94129 11.5661 2.37868 12.1287C1.81607 12.6913 1.5 13.4544 1.5 14.25V15.75" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M6.75 8.25C8.40685 8.25 9.75 6.90685 9.75 5.25C9.75 3.59315 8.40685 2.25 6.75 2.25C5.09315 2.25 3.75 3.59315 3.75 5.25C3.75 6.90685 5.09315 8.25 6.75 8.25Z" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M14.25 6V10.5" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M16.5 8.25H12" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              Добавить сотрудника
            </button>
        </div>
    </div>
    <div class="main-container">
        <div class="block">
            <h3>
                Мои URLs
            </h3>
            @for(item of allURLsSubscriptions; track item){
                <div class="buttons">
                    <input class="input-mini" disabled value="{{item.url}}" style="min-width: 400px;" placeholder="Путь/до/Публичного/API" /> <button
                        class="delete-all-button" (click)="unSubscription(item.id)">Отписаться</button>
                </div>
            }
        </div>
        <div class="block">
            <h3>
                <div style="display: flex; align-items: center; gap: 5px;">
                Мои Топики 
                <svg class="icon-click" (click)="changeCreateTopic()" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 3.75V14.25" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3.75 9H14.25" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                
                    @if(openCreateTopic){
                        <div class="model-create-topics-back">
                            <div class="model-create-topics-back-click" (click)="changeCreateTopic()">
                            </div>
                            <div class="model-create-topics">
                                <h2>Создание Топика</h2>
                                <input placeholder="Название" [formControl] = "topicName"/>
                                <textarea placeholder="Описание"  [formControl] = "topicDescription"></textarea>
                                <input placeholder="json_template"/>
                                <button (click)="createTopic()" class="main-button">Создать</button>
                            </div>
                        
                        </div>
                    }

                </div>
            </h3>
            
            @for(item of this.topics; track item){
                <div class = "topic-block">
                    <h2>{{item.name}}</h2>

                    <p>{{item.description}}</p>

                    <!-- {{item.json_template}} -->

                    <button class = "delete-button" (click)="removeTopic(item.id)">Удалить топик</button>
                    <button class="ghost-button" (click)="changeOpenPermisionEditor()">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 15.75V14.25C12 13.4544 11.6839 12.6913 11.1213 12.1287C10.5587 11.5661 9.79565 11.25 9 11.25H4.5C3.70435 11.25 2.94129 11.5661 2.37868 12.1287C1.81607 12.6913 1.5 13.4544 1.5 14.25V15.75" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M6.75 8.25C8.40685 8.25 9.75 6.90685 9.75 5.25C9.75 3.59315 8.40685 2.25 6.75 2.25C5.09315 2.25 3.75 3.59315 3.75 5.25C3.75 6.90685 5.09315 8.25 6.75 8.25Z" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M14.25 9.75C15.0784 9.75 15.75 9.07843 15.75 8.25C15.75 7.42157 15.0784 6.75 14.25 6.75C13.4216 6.75 12.75 7.42157 12.75 8.25C12.75 9.07843 13.4216 9.75 14.25 9.75Z" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M14.25 6V6.75" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M14.25 9.75V10.5" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M16.1999 7.125L15.5474 7.5" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12.9523 9L12.2998 9.375" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M16.1999 9.375L15.5474 9" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12.9523 7.5L12.2998 7.125" stroke="#3C72FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      Управление правми
                    </button>
                    @if(openPermisionEditor){
                        <div>
                            <button class="main-button">Добавить права</button>
                        </div>
                    }
                </div>
            }
        </div>
    </div>
</div>